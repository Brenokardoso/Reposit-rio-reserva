/** autogenerated **/
/**
 *
 **/
Ext._define('transparency.people_management.trainees.Grid', {
    extend: 'core.RestfulGrid',

    restWindow: 'transparency.people_management.trainees.Window',
    rest: 'transparency.people_management.trainees.Restful',

    configOrderToolBar: ['add', '-', 'loadData', '-', 'search', '->', 'filter', 'download'],

    hideActions: ['remove', 'edit'],

    getColumnModel: function() {
        if(!this._columnModel)
            this._columnModel = Ext._create(
                'Ext.grid.ColumnModel',
                [
                    Ext._create('Ext.grid.RowNumberer'),
                    {header: 'Cod', dataIndex: 'pk', width: 50, hidden: true},
                    {header: 'Mês', dataIndex: 'month', width: 50},
                    {header: 'Ano', dataIndex: 'year', width: 50},
                    {header: 'Nome', dataIndex: 'name', width: 90, id: 'autoExpandColumn'},
                    {header: 'Nível', dataIndex: 'level', width: 90},
                    {header: 'Especialidade', dataIndex: 'specialty', width: 90},
                    {header: 'Obrigatório', dataIndex: 'is_mandatory', width: 90, renderer: function(value) { return (value ? 'SIM' : 'NÃO');}},
                    {header: 'Prazo', dataIndex: 'deadline', width: 90, renderer: Ext.util.Format.dateRenderer('d/m/Y')},

                    {header: 'created by', dataIndex: 'created_by_unicode', width: 120, hidden: true},
                    {header: 'modified by', dataIndex: 'modified_by_unicode', width: 120, hidden: true},
                    {header: 'created at', dataIndex: 'created_at', width: 90, renderer: Ext.util.Format.dateRenderer('d/m/Y H:i'), hidden: true},
                    {header: 'modified at', dataIndex: 'modified_at', width: 90, renderer: Ext.util.Format.dateRenderer('d/m/Y H:i'), hidden: true},
                ]
            );

        return this._columnModel;
    },

    loadingData: function() {    
        var _window = Ext._create(
            'transparency.people_management.trainees.PMLoadDataWindow'
        );

        _window.show();
    },

    getLoadDataAction: function () {
        if (!this._loadData)  {
            this._loadData = Ext._create('Ext.Button', {
                text: 'Carregar Dados',
                iconCls: 'icon-agree icon-agree-appointment-new',
                scope: this,
                handler: function () {
                    this.loadingData();
                }
            });
        }
        return this._loadData;
    },

    getFilterAction: function() {
        if(!this._filterAction)
            this._filterAction = Ext._create('Ext.Button', {
                text: 'Filtro',
                iconCls: 'icon-patrimonio icon-pat-filter',
                menu: [
                    {
                        text: 'Obrigatórios',
                        checked: false,
                        scope: this,
                        hideOnClick: false,
                        listeners: {
                            scope: this,
                            checkchange: function (item, checked) {
                                if (checked)
                                    this.addFilterProperty('is_mandatory', 'on', 110);
                                else
                                    this.removeFilterProperty('is_mandatory', 110);
                            }
                        }
                    },
                    {
                        text: 'Não obrigatórios',
                        checked: false,
                        scope: this,
                        hideOnClick: false,
                        listeners: {
                            scope: this,
                            checkchange: function (item, checked) {
                                if (checked)
                                    this.addFilterProperty('is_mandatory', 'false', 110);
                                else
                                    this.removeFilterProperty('is_mandatory', 110);
                            }
                        }
                    },
                ]
            });
    
        return this._filterAction;
    },


});

core.RestfulGrid.register(
    'transparency.people_management.trainees.Restful',
    'transparency.people_management.trainees.Grid'
);

